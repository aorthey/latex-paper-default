\usepackage{siunitx}

\usepackage{xspace}
\usepackage{mathtools}
\usetikzlibrary{arrows, decorations.markings}
\def\z{ \ensuremath{z} }
\def\u{ \ensuremath{u} }

\newcommand*\getvaluecm[2]{ \pgfmathsetmacro#1{0.0351459804*#2}}
\newcommand\W{ \ensuremath{\mathcal{W}} }
\newcommand\SE{ \ensuremath{SE}\xspace}

\newcommand\e{\ensuremath{\mathbf{e}}\xspace}
\newcommand\force{\ensuremath{\mathbf{F}}\xspace}

\newcommand\dtau{\ensuremath{\dot{\tau}}\xspace}
\newcommand\ddtau{\ensuremath{\ddot{\tau}}\xspace}
\newcommand\taudtheta{\ensuremath{\dfrac{d\tau}{d\theta}}\xspace}
\newcommand\tauddtheta{\ensuremath{\dfrac{d^2\tau}{d\theta^2}}\xspace}

\newcommand\dtheta{\ensuremath{\dot{\theta}}\xspace}
\newcommand\ddtheta{\ensuremath{\ddot{\theta}}\xspace}

\newcommand\dt{\ensuremath{\Delta t}\xspace}
\newcommand\ddt{\ensuremath{\dfrac{\Delta t^2}{2}}\xspace}
\newcommand\ds{\ensuremath{\Delta s}\xspace}
\newcommand\dds{\ensuremath{\dfrac{\Delta s^2}{2}}\xspace}

\newcommand\q{\ensuremath{q}\xspace}
\newcommand\dq{\ensuremath{\dot{q}}\xspace}
\newcommand\ddq{\ensuremath{\ddot{q}}\xspace}

\newcommand\FF{{\it{FF}}\xspace}
\def\Fqq{\ensuremath{\mathcal{F}(q_I,q_G)}\xspace}

\newcommand\norm[1]{ \ensuremath{\|#1\|_2} }
\newcommand\vb{ \ensuremath{\mathbf{v}} }
\newcommand\zb{ \ensuremath{\mathbf{z}} }
\newcommand\bb{ \ensuremath{\mathbf{b}} }
\newcommand\ab{ \ensuremath{\mathbf{a}} }
\newcommand\xb{ \ensuremath{\mathbf{x}} }
\newcommand\yb{ \ensuremath{\mathbf{y}} }
\newcommand\sbb{ \ensuremath{\mathbf{s}} }
\newcommand\lb{ \ensuremath{\mathbf{l}} }
\newcommand\Lb{ \ensuremath{\mathbf{L}} }
\newcommand\Db{ \ensuremath{\mathbf{D}} }
\newcommand\Lc{ \ensuremath{\mathcal{L}} }
\newcommand\Ln{ \ensuremath{{L}} }
\newcommand\hLn{ \ensuremath{\hat{L}} }
\newcommand\hKb{ \ensuremath{\hat{\mathbf{K}}} }
\newcommand\hzb{ \ensuremath{\hat{\mathbf{z}}} }
\newcommand\nb{ \ensuremath{\mathbf{n}} }
\newcommand\hnb{ \ensuremath{\hat{\mathbf{n}}} }
\newcommand\Kb{ \ensuremath{\mathbf{K}} }
\newcommand\In{ \ensuremath{{I}} }
\newcommand\Epsilon{ \ensuremath{{\boldsymbol{\epsilon}}} }
\newcommand\lnf{\ensuremath{\|f\|_{Lip}}}
\newcommand\lnfc{\ensuremath{\|f\|_{Lip(\Omega)}}}
\newcommand\lnfa{\ensuremath{\|f\|_{Lip(A)}}}
\newcommand\lnfb{\ensuremath{\|f\|_{Lip(B)}}}
\newcommand\Dc{\ensuremath{\mathcal{D}_C}}
\newcommand\basis{\ensuremath{\phi}}
\newcommand\Basis{\ensuremath{\Phi}}
\newcommand\wlg{\ensuremath{\text{w.l.o.g.}}\xspace}
%%environment and environment element
\newcommand\env{\ensuremath{\mathbf{E}}}
\newcommand\envelem{\ensuremath{\mathbf{e}}}
\newcommand\envenergy{\ensuremath{\mathbf{g}}}
\newcommand\manifoldproj{\ensuremath{\mathbf{P}}}
\newcommand\manifoldmod{\ensuremath{\mathbf{M}}}
\newcommand\manifold{\ensuremath{\mathbf{m}}}
\newcommand\one{\ensuremath{\mathbf{1}}}

\newcommand\sweptvolume{\ensuremath{\mathbf{V}}}
\newcommand\I{\ensuremath{\mathcal{I}}}
%\newcommand\SV{\ensuremath{\mathcal{V}}}
\newcommand\SV{\ensuremath{V}}
\newcommand\projsv{\ensuremath{V}}
\newcommand\projsvelem{\ensuremath{\tilde{v}}}
\newcommand\svelem{\ensuremath{\mathbf{v}}}
\newcommand\ring{\ensuremath{\mathcal{R}}}
\newcommand\elemmeasure{\ensuremath{\mu_{\envelem}}}
\newcommand\taskspace{\ensuremath{\mathcal{T}}}
\newcommand\workspace{\ensuremath{\mathcal{W}}}
\newcommand\mpproblem{\ensuremath{\mathcal{P}}}

%\newcommand{\diag}{\mathop{\mathrm{diag}}}
\DeclareMathOperator{\diag}{\mathbf{diag}}
\DeclareMathOperator{\rank}{rk}
\DeclareMathOperator{\asin}{asin}
\DeclareMathOperator{\acos}{acos}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\def\x{ \ensuremath{x} }
\def\p{ \ensuremath{p} }
\def\qT{ \ensuremath{q_{1:T}} }
\def\C{ \ensuremath{\mathcal{C}} }
\def\Cfunc{ \ensuremath{\mathbf{C}} }
\def\CF{\ensuremath{{\cal{C}}_{free}}}
\def\CO{\ensuremath{{\cal{C}}_{obs}}}
\def\co{\CO}
\def\cf{\CF}
\def\cfree{\CF}
\def\Cfree{\CF}
\def\P{\ensuremath{{\cal{P}}}\xspace}
\def\Pf{\ensuremath{{\cal{P}}_{f}}\xspace}
\newcommand\Psp{\ensuremath{{p_{\pi}}}}
\newcommand\pio{\ensuremath{\pi^{\star}}}

\newcommand\EP[1]{\ensuremath{\mathbb{E}\left[#1\right]}}
\def\PXX{\ensuremath{P(x,\dot{x})}}
\def\PCX{\ensuremath{P(\dot{x}|x)}}
\def\PX{\ensuremath{P(x)}}
\def\eps{\ensuremath{\epsilon}}
\def\S{\ensuremath{\mathcal{S}}\xspace}
\def\E{\ensuremath{\mathcal{E}}\xspace}
\def\Qt{\ensuremath{\mathcal{\tilde{Q}}}\xspace}
\def\QH{\ensuremath{Q_{\text{HRP2}}}\xspace}

\def\speed{\ensuremath{\theta}\xspace}

\def\R{\ensuremath{\mathbb{R}}\xspace}
\newcommand\rdate[1]{{\bf{#1}}\newline}

\def\parents{\ensuremath{\text{parents}}\xspace}
\def\children{\ensuremath{\text{children}}\xspace}
\def\rotYZ{\ensuremath{\mathbf{R}_{YZ}}\xspace}
\def\rot{\ensuremath{\mathbf{R}}\xspace}

\def\Robot{\ensuremath{\mathcal{R}}\xspace}
\def\robot{\Robot}

\def\X{\ensuremath{\mathcal{X}}\xspace}
\def\Q{\ensuremath{\mathcal{Q}}\xspace}
\def\Xt{\ensuremath{\mathcal{\tilde{X}}}\xspace}
\def\Dt{\ensuremath{\mathcal{\tilde{D}}}\xspace}
\def\D{\ensuremath{\mathcal{D}}\xspace}

\DeclareMathOperator*{\T}{\mathbf{T}}
\DeclareMathOperator*{\RX}{\mathbf{R}_{X}}
\DeclareMathOperator*{\RY}{\mathbf{R}_{Y}}
\DeclareMathOperator*{\RZ}{\mathbf{R}_{Z}}

\def\N{\ensuremath{\mathbb{N}}\xspace}

\def\B{\ensuremath{\mathcal{B}}\xspace}
\def\F{\ensuremath{\mathcal{F}}\xspace}
\def\V{\ensuremath{\mathcal{V}}\xspace}
\def\F{\ensuremath{\mathcal{F}}\xspace}
\def\M{\ensuremath{\mathcal{M}}\xspace}
\def\U{\ensuremath{\mathcal{U}}\xspace}
\def\D{\ensuremath{\mathcal{D}}\xspace}
\def\K{\ensuremath{\mathcal{K}}\xspace}
\def\L{\ensuremath{\mathbf{L}}\xspace}

\def\M{\ensuremath{\mathbf{M}}\xspace}
\def\A{\ensuremath{\mathbf{A}}\xspace}
\def\G{\ensuremath{\mathbf{G}}\xspace}
\def\H{\ensuremath{\mathbf{H}}\xspace}

\def\Line{\ensuremath{\mathbf{L}}\xspace}

\def\PXZ{\ensuremath{\mathcal{P}_{xz}}\xspace}

\DeclareMathOperator*{\argmin}{\arg\!\min\ }
\DeclareMathOperator{\conv}{\mathbf{conv}}

\newcounter{todoCtr}

\newcommand{\comment}[1]{\ignorespaces {\bf{\textcolor{red}{Comment} :
}{\textcolor{red}{#1}}} }

\newcommand*\todo[1]{\stepcounter{todoCtr}%
        {\bf\textcolor{red}{TODO} \#\arabic{todoCtr}: }%
        \textcolor{red}{#1} }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Algorithm
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\algnewcommand{\And}{\textbf{and}\xspace}
%\algdef{SE}[DOWHILE]{Do}{doWhile}{\algorithmicdo}[1]{\algorithmicwhile\ #1}%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% SPECIAL BEAMER STYLES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% tikzstyles %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{xspace}
\usetikzlibrary{patterns}
\xdefinecolor{darkgreen}{rgb}{0,0.60,0}
\xdefinecolor{lightgray}{rgb}{0.9,0.9,0.9}
\tikzset{
    -|/.style={
        to path={
            (perpendicular cs: horizontal line through={(\tikztostart)},
                                 vertical line through={(\tikztotarget)})
            % is the same as (\tikztostart -| \tikztotarget)
            % but just to be safe: http://tex.stackexchange.com/a/29781/16595
            -- (\tikztotarget) \tikztonodes
        }
    }
}
\tikzstyle{taskRect}=[draw, color=black!70, fill=black!7, rectangle, rounded
corners, thick, minimum width=3cm, minimum height=0.6cm]
\tikzstyle{borderRect}=[draw, color=red!70, fill=gray!7, rectangle, rounded
corners, thick, minimum width=8cm, minimum height=3cm]
\tikzstyle{testBRect}=[draw, color=darkgreen!100, fill=gray!7, rectangle, rounded
corners, thick, minimum width=8cm, minimum height=3cm]
\tikzstyle{stdBR}=[draw, color=black, fill=gray!7, rectangle, rounded
corners, thick, minimum width=8cm, minimum height=3cm]
\tikzstyle{boundingBox}=[draw, color=red!100, fill=gray!7, rectangle, rounded
corners, thick, minimum width=3cm, minimum height=1cm]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% SPECIAL ARROWS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tikzstyle{arrow}=[->, draw, thick]
\tikzstyle{darrow}=[->, draw, ultra thick]
\tikzstyle{uarrow}=[-, draw, ultra thick]
\tikzstyle{linkArrow} = [thick, decoration={markings,mark=at position
   1 with {\arrow[semithick]{open triangle 60}}},
   double distance=0.3cm, shorten >= 0.0pt,
   preaction = {decorate}]



\tikzstyle{hlBox}=[draw, color=red!70, fill=black!7, rectangle, rounded
corners, ultra thick, minimum width=3cm, minimum height=0.6cm]
\tikzstyle{nUnit}=[draw, color=black!70, fill=black!7, circle, rounded
corners, ultra thick, minimum width=1cm, minimum height=0.2cm]
\tikzstyle{subspace}=[draw, circle, color=black, fill=black!7, thick, pattern=north east lines, pattern color=black!20, minimum width=1cm, minimum height=0.2cm]


\tikzstyle{endeffectorArrow} = [thick,
                decoration={markings,mark=at position 1 with
                {\arrow[scale=1.4,thick,black]{[}}},
                    postaction={decorate},
double distance=3pt, shorten >= 2.5pt]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% defining the new dimensions and parameters
\newlength{\hatchspread}
\newlength{\hatchthickness}
\newlength{\hatchshift}
\newcommand{\hatchcolor}{}
% declaring the keys in tikz
\tikzset{hatchspread/.code={\setlength{\hatchspread}{#1}},
         hatchthickness/.code={\setlength{\hatchthickness}{#1}},
         hatchshift/.code={\setlength{\hatchshift}{#1}},% must be >= 0
         hatchcolor/.code={\renewcommand{\hatchcolor}{#1}}}
% setting the default values
\tikzset{hatchspread=3pt,
         hatchthickness=0.4pt,
         hatchshift=0pt,% must be >= 0
         hatchcolor=black}
% declaring the pattern
\pgfdeclarepatternformonly[\hatchspread,\hatchthickness,\hatchshift,\hatchcolor]% variables
   {custom north west lines}% name
   {\pgfqpoint{\dimexpr-2\hatchthickness}{\dimexpr-2\hatchthickness}}% lower left corner
   {\pgfqpoint{\dimexpr\hatchspread+2\hatchthickness}{\dimexpr\hatchspread+2\hatchthickness}}% upper right corner
   {\pgfqpoint{\dimexpr\hatchspread}{\dimexpr\hatchspread}}% tile size
   {% shape description
    \pgfsetlinewidth{\hatchthickness}
    \pgfpathmoveto{\pgfqpoint{0pt}{\dimexpr\hatchspread+\hatchshift}}
    \pgfpathlineto{\pgfqpoint{\dimexpr\hatchspread+0.15pt+\hatchshift}{-0.15pt}}
    \ifdim \hatchshift > 0pt
      \pgfpathmoveto{\pgfqpoint{0pt}{\hatchshift}}
      \pgfpathlineto{\pgfqpoint{\dimexpr0.15pt+\hatchshift}{-0.15pt}}
    \fi
    \pgfsetstrokecolor{\hatchcolor}
%    \pgfsetdash{{1pt}{1pt}}{0pt}% dashing cannot work correctly in all situation this way
    \pgfusepath{stroke}
   }

\tikzset{
 ->-/.style={
  decoration={
   markings,
   mark=at position 0.5 with {\arrow{>}{angle 90};}
  },
  postaction={decorate}
 }
}

\tikzset{
 ->>-/.style={
  decoration={
   markings,
   mark=at position 0.55 with {\arrow{>>}{angle 90};}
  },
  postaction={decorate}
 }
}
%%%%%%%%%%%%%%%%%%%%%%%% Workspace planning variables
\DeclareMathOperator{\interior}{int}
\def\ajit{a_j^{(i)T}}
\def\aji{a_j^{(i)}}
\def\bji{b_j^{(i)}}

\def\ajipt{\hat{a}_j^{(i)T}}
\def\ajip{\hat{a}_j^{(i)}}
\def\bjip{\hat{b}_j^{(i)}}

\def\api{a_p^{(i)}}
\def\apit{a_p^{(i)T}}
\def\bpi{b_p^{(i)}}

\def\aki{a_k^{(i)}}
\def\akit{a_k^{(i)T}}
\def\bki{b_k^{(i)}}

\def\xji{x_{j,0}^{(i)}}
\def\xli{x_{L}^{(i)}}
\def\xri{x_{R}^{(i)}}

\def\hrp{HRP-2\xspace}
\def\sip{\ensuremath{S_i^p}\xspace}
\def\bip{\ensuremath{B_i^p}\xspace}
\def\eip{\ensuremath{E_i^p}\xspace}
\def\obip{\ensuremath{O_k^{\bip}}\xspace}
\def\S{\ensuremath{\mathbf{S}}\xspace}

\def\RobotMaxSlope{\ensuremath{\Robot_{\theta}}\xspace}
\def\RobotMaxHeight{\ensuremath{\Robot_{\text{H}_\text{U}}}\xspace}
\def\RobotMinHeight{\ensuremath{\Robot_{\text{H}_\text{L}}}\xspace}
\def\RobotFootRadius{\ensuremath{\Robot_{\text{FR}}}\xspace}
\def\RobotFootHeight{\ensuremath{\Robot_{\text{FH}}}\xspace}
\def\RobotMinHeadHeight{\ensuremath{\Robot_{\text{Head}}}\xspace}
\def\RobotStepMaxHeight{\ensuremath{\Robot_{\text{StepHeight}}}\xspace}
\def\RobotStepMaxWidth{\ensuremath{\Robot_{\text{StepWidth}}}\xspace}
\def\RobotKneeAperture{\ensuremath{\Robot_{\text{KneeFlex}}}\xspace}

\def\RobotMinSphereRadius{\ensuremath{\Robot_{\text{SphereRadius}}}\xspace}
\def\bipfoot{\ensuremath{B_{i,F}^p}}
\def\bipbody{\ensuremath{B_{i,B}^p}}
\def\biphead{\ensuremath{B_{i,H}^p}}

\def\bipmin{\ensuremath{\bip(\RobotMinHeight)}\xspace}
\def\bipmax{\ensuremath{\bip(\RobotMaxHeight)}\xspace}

\usepackage{wrapfig}
\newcommand\highlightBox[1]{
\begin{wrapfigure}{O}{0.5\linewidth}
  \begin{center}

        %\fbox{
        \begin{minipage}{0.9\linewidth}
\it
\large
"#1"
        \end{minipage}
        %}
  \end{center}
\end{wrapfigure}
}

